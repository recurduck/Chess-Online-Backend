(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{132:function(e,r,n){},138:function(e,r,n){"use strict";n.r(r);var t=n(0),a=n.n(t),c=n(26),s=n.n(c),i=n(8),o=n(6),u=n(1);function l(){return Object(u.jsx)("div",{className:"hero flex column justify-center align-center",children:Object(u.jsx)(i.b,{to:"/gamerooms",children:Object(u.jsx)("h1",{children:"Welcome to Chess online"})})})}var d=n(3),j=n.n(d),h=n(4),p=n(22),b=n(66),f="/api/",m=n.n(b).a.create({withCredentials:!0}),O=function(e,r){return w(e,"GET",r)},g=function(e,r){return w(e,"POST",r)},x=function(e,r){return w(e,"PUT",r)},v=function(e,r){return w(e,"DELETE",r)};function w(e){return y.apply(this,arguments)}function y(){return(y=Object(h.a)(j.a.mark((function e(r){var n,t,a,c=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"get",t=c.length>2&&void 0!==c[2]?c[2]:null,e.prev=2,e.next=5,m({url:"".concat(f).concat(r),method:n,data:t,params:"GET"===n?t:null});case 5:return a=e.sent,e.abrupt("return",a.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(r,", with data: ").concat(t,"\n ").concat(f).concat(r)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var N={query:function(){return O("board")},addBoard:function(e){return g("board",e)},deleteBoard:function(e){return v("board/".concat(e))},getBoardById:function(e){return O("board/".concat(e))},onMovePiece:function(e,r,n,t){return x("board/".concat(e),{gameId:e,fromCoord:r,toCoord:n,frontBoard:t})},addPlayerToGame:function(e,r){return x("board/".concat(e,"/").concat(r),{boardId:e,playerId:r})},KIT:{KING_WHITE:"\u2654",QUEEN_WHITE:"\u2655",ROOK_WHITE:"\u2656",BISHOP_WHITE:"\u2657",KNIGHT_WHITE:"\u2658",PAWN_WHITE:"\u2659",KING_BLACK:"\u265a",QUEEN_BLACK:"\u265b",ROOK_BLACK:"\u265c",BISHOP_BLACK:"\u265d",KNIGHT_BLACK:"\u265e",PAWN_BLACK:"\u265f"}};var k=n(11),_=function(){var e=Object(t.useState)(null),r=Object(p.a)(e,2),n=r[0],a=r[1],c=Object(o.e)(),s=Object(k.c)((function(e){return e.userModule})),i=function(){var e=Object(h.a)(j.a.mark((function e(){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.query();case 2:r=e.sent,a(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(h.a)(j.a.mark((function e(){var r,n,t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.loggedInUser,n=r._id,t=r.username,e.next=3,N.addBoard({_id:n,username:t});case 3:a=e.sent,c.push("/gamerooms/".concat(a._id));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(h.a)(j.a.mark((function e(r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.loggedInUser){e.next=4;break}return n=s.loggedInUser._id,e.next=4,N.addPlayerToGame(r,n);case 4:c.push("/gamerooms/".concat(r));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),b=function(e){return s.loggedInUser&&(e.whitePlayer.user._id===s.loggedInUser._id||e.blackPlayer.user&&e.blackPlayer.user._id===s.loggedInUser._id)?"back":e.blackPlayer.user?"Watch":s.loggedInUser?"Join":"Watch"};return n?Object(u.jsxs)("div",{children:[s.loggedInUser&&Object(u.jsx)("button",{className:"new-game-btn",onClick:function(){return l()},children:"New Game"}),Object(u.jsxs)("table",{className:"boards-list",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Room ID"}),Object(u.jsx)("th",{children:"Player 1"}),Object(u.jsx)("th",{children:"Player 2"}),Object(u.jsx)("th",{children:"Players"}),Object(u.jsx)("th",{children:"Action"})]})}),Object(u.jsx)("tbody",{children:n.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e._id}),Object(u.jsx)("td",{children:e.whitePlayer.user.username}),Object(u.jsx)("td",{children:e.blackPlayer.user?e.blackPlayer.user.username:"pending"}),Object(u.jsxs)("td",{children:[e.blackPlayer.user?"2":"1","/2"]}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:function(){return d(e._id)},children:b(e)})})]},e._id)}))})]})]}):(i(),Object(u.jsx)("div",{children:"loading..."}))},I=n(5),E=n(27),P=N.KIT,T=null,C={cellClicked:function(e,r,n,t){var a=n.gameBoard;if(t===(n.whiteTurn?n.whitePlayer.user._id:n.blackPlayer.user._id)){var c={i:e,j:r};if(a[e][r].isMarked)return n=N.onMovePiece(n._id,T,c,a),q(a),n;if(F(c,a))return;q(a),a[e][r].isSelected=!0,T=c;var s=function(e,r,n){var t=[];if(n.whiteTurn)switch(e){case P.ROOK_WHITE:t=K(r,n.gameBoard,n.whiteTurn);break;case P.BISHOP_WHITE:t=L(r,n.gameBoard,n.whiteTurn);break;case P.KNIGHT_WHITE:t=G(r,n.gameBoard,n.whiteTurn);break;case P.PAWN_WHITE:t=A(r,n.whiteTurn,n.gameBoard,n);break;case P.QUEEN_WHITE:t=M(r,n.gameBoard,n.whiteTurn);break;case P.KING_WHITE:t=R(r,n);break;default:return t}else switch(e){case P.ROOK_BLACK:t=K(r,n.gameBoard,n.whiteTurn);break;case P.BISHOP_BLACK:t=L(r,n.gameBoard,n.whiteTurn);break;case P.KNIGHT_BLACK:t=G(r,n.gameBoard,n.whiteTurn);break;case P.PAWN_BLACK:t=A(r,n.whiteTurn,n.gameBoard,n);break;case P.QUEEN_BLACK:t=M(r,n.gameBoard,n.whiteTurn);break;case P.KING_BLACK:t=R(r,n);break;default:return t}return t}(a[e][r].piece,c,n);return function(e,r){e.forEach((function(e){r[e.i][e.j].isMarked=!0}))}(s=s.filter((function(e){return!function(e,r,n){var t=JSON.parse(JSON.stringify(n.gameBoard)),a=t[e.i][e.j].piece,c=n.whitePlayer.kingPos,s=n.blackPlayer.kingPos;t[e.i][e.j].piece="",t[r.i][r.j].piece=function(e,r){return r===P.PAWN_BLACK&&7===e.i?P.QUEEN_BLACK:r===P.PAWN_WHITE&&0===e.i?P.QUEEN_WHITE:r}(r,a),t[r.i][r.j].isWhite=t[e.i][e.j].isWhite,t[e.i][e.j].isWhite=void 0,a===P.KING_WHITE?c={i:r.i,j:r.j}:a===P.KING_BLACK&&(s={i:r.i,j:r.j});return B(n.whiteTurn?c:s,n.whiteTurn,t,n)}(c,e,n)})),a),n}},onReset:function(){localStorage.clear(),window.location.reload()}};function B(e,r,n,t){var a=[];S(e,r,n)&&a.push.apply(a,Object(E.a)(S(e,r,n))),U(e,r,n,t)&&a.push.apply(a,Object(E.a)(U(e,r,n,t)));for(var c=K(e,n,t.whiteTurn),s=0;s<c.length;s++){var i={i:c[s].i,j:c[s].j},o=n[i.i][i.j].piece;o!==P.ROOK_BLACK&&o!==P.ROOK_WHITE&&o!==P.QUEEN_BLACK&&o!==P.QUEEN_WHITE||!Q(i,n)!==r||a.push(i)}c=L(e,n,t.whiteTurn);for(var u=0;u<c.length;u++){var l={i:c[u].i,j:c[u].j},d=n[l.i][l.j].piece;d!==P.BISHOP_BLACK&&d!==P.BISHOP_WHITE&&d!==P.QUEEN_BLACK&&d!==P.QUEEN_WHITE||!Q(l,n)!==r||a.push(l)}c=G(e,n,t.whiteTurn);for(var j=0;j<c.length;j++){var h={i:c[j].i,j:c[j].j},p=n[h.i][h.j].piece;p!==P.KNIGHT_BLACK&&p!==P.KNIGHT_WHITE||!Q(h,n)!==r||a.push(h)}return!!a.length&&a}function U(e,r,n,t){var a=[],c={i:r?e.i-1:e.i+1,j:e.j};if(r===t.whiteTurn)for(var s=-1;s<=1;s++){var i={i:c.i,j:c.j+s};if(i.j<8&&i.j>=0&&!F(i,n)&&n[i.i][i.j].piece===(r?P.PAWN_BLACK:P.PAWN_WHITE))Object(E.a)(A(i,!r,n,t)).find((function(r){return r.i===e.i&&r.j===e.j}))&&a.push(i)}else{if(e.i<1||e.i>6)return!1;c.j>0&&n[c.i][c.j-1].piece===(r?P.PAWN_BLACK:P.PAWN_WHITE)&&a.push({i:c.i,j:c.j-1}),c.j<7&&n[c.i][c.j+1].piece===(r?P.PAWN_BLACK:P.PAWN_WHITE)&&a.push({i:c.i,j:c.j+1})}return!!a.length&&a}function S(e,r,n){for(var t=[],a=e.i-1;a<=e.i+1;a++)if(!(a<0||a>=8))for(var c=e.j-1;c<=e.j+1;c++)if((a!==e.i||c!==e.j)&&!(c<0||c>=8)){var s={i:a,j:c};(F(s,n)||Q(s,n)!==r)&&n[a][c].piece===(r?P.KING_BLACK:P.KING_WHITE)&&t.push(s)}return!!t.length&&t}function A(e,r,n,t){var a=[],c=n[e.i][e.j].piece===P.PAWN_WHITE,s=c?-1:1,i={i:e.i+s,j:e.j},o={i:e.i+s,j:e.j+1},u={i:e.i+s,j:e.j-1};return(o.j<8&&!F(o,n)&&Q(o,n)!==r||W(o,e,r,c,n,t))&&e.j+1<8&&a.push(o),(u.j>=0&&!F(u,n)&&Q(u,n)!==r||W(u,e,r,c,n,t))&&e.j-1>=0&&a.push(u),F(i,n)&&r===t.whiteTurn?(a.push(i),(1===e.i&&!c||6===e.i&&c)&&(s*=2,F(i={i:e.i+s,j:e.j},n)&&a.push(i)),a):a}function W(e,r,n,t,a,c){return!(null===c.blackPlayer.lastMove.fromCoord||e.j>7||e.j<0)&&(F(e,a)&&(3===r.i&&t||4===r.i&&!t)&&a[r.i][e.j].piece===(n?P.PAWN_BLACK:P.PAWN_WHITE)&&(t?c.blackPlayer.lastMove.fromCoord.j===c.blackPlayer.lastMove.toCoord.j&&2===Math.abs(c.blackPlayer.lastMove.fromCoord.i-c.blackPlayer.lastMove.toCoord.i):c.whitePlayer.lastMove.fromCoord.j===c.whitePlayer.lastMove.toCoord.j&&2===Math.abs(c.whitePlayer.lastMove.fromCoord.i-c.whitePlayer.lastMove.toCoord.i))&&r.i===(t?c.blackPlayer.lastMove.toCoord.i:c.whitePlayer.lastMove.toCoord.i)&&e.j===(t?c.blackPlayer.lastMove.toCoord.j:c.whitePlayer.lastMove.toCoord.j))}function K(e,r,n){for(var t=[],a=0;a<4;a++)for(var c=H(a,e);a%2===0?c>=0:c<8;a%2===0?c--:c++){var s=a<2?{i:c,j:e.j}:{i:e.i,j:c};if(!F(s,r)){if(Q(s,r)===n)break;t.push(s);break}t.push(s)}return t}function L(e,r,n){for(var t=[],a=0;a<4;a++)for(var c=e.i+(a<2?-1:1),s=e.j+(a%2===0?1:-1);(a<2?c>=0:c<8)&&(a%2===0?s<8:s>=0);a%2===0?s++:s--){var i={i:a<2?c--:c++,j:s};if(!F(i,r)){if(Q(i,r)===n)break;t.push(i);break}t.push(i)}return t}function H(e,r){return(e<2?r.i:r.j)+(e%2===0?-1:1)}function M(e,r,n){var t=L(e,r,n);return K(e,r,n).concat(t)}function G(e,r,n){for(var t=[],a=e.i-2;a<=e.i+2;a++)if(a!==e.i&&!(a<0||a>=8))for(var c=e.j-2;c<=e.j+2;c++)if((a!==e.i||c!==e.j)&&!(c<0||c>=8)){var s={i:a,j:c};(F(s,r)||Q(s,r)!==n)&&Math.abs(e.i-a)+Math.abs(e.j-c)===3&&t.push(s)}return t}function R(e,r){for(var n=[],t=r.gameBoard,a=e.i-1;a<=e.i+1;a++)if(!(a<0||a>=8))for(var c=e.j-1;c<=e.j+1;c++)if((a!==e.i||c!==e.j)&&!(c<0||c>=8)){var s={i:a,j:c};(F(s,t)||Q(s,t)!==r.whiteTurn)&&(B(s,r.whiteTurn,r.gameBoard,r)||(n.push(s),5!==c&&3!==c||0!==a&&7!==a||D(r,s,n)))}return n}function D(e,r,n){var t=e.gameBoard;e.whiteTurn&&!e.whitePlayer.kingMoved?5===r.j&&F({i:r.i,j:r.j+1},t)&&!B({i:r.i,j:r.j+1},e.whiteTurn,t,e)?n.push({i:r.i,j:r.j+1}):F({i:r.i,j:r.j-1},t)&&!B({i:r.i,j:r.j-1},e.whiteTurn,t,e)&&n.push({i:r.i,j:r.j-1}):e.whiteTurn||e.whitePlayer.kingMoved||(5===r.j&&F({i:r.i,j:r.j+1},t)&&!B({i:r.i,j:r.j+1},e.whiteTurn,t,e)?n.push({i:r.i,j:r.j+1}):F({i:r.i,j:r.j-1},t)&&!B({i:r.i,j:r.j-1},e.whiteTurn,t,e)&&n.push({i:r.i,j:r.j-1}))}function F(e,r){return""===r[e.i][e.j].piece}function Q(e,r){return r[e.i][e.j].isWhite}function q(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)e[r][n].isMarked&&(e[r][n].isMarked=!1),e[r][n].isSelected&&(e[r][n].isSelected=!1)}var J=n(68),V=n.n(J),X=function(){var e=null,r={setup:function(){return Object(h.a)(j.a.mark((function r(){return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,O("setup-session");case 4:e=V()("",{reconnection:!1}),!0;case 6:case"end":return r.stop()}}),r)})))()},on:function(n,t){return Object(h.a)(j.a.mark((function a(){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=3;break}return a.next=3,r.setup();case 3:e.on(n,t);case 4:case"end":return a.stop()}}),a)})))()},off:function(n){var t=arguments;return Object(h.a)(j.a.mark((function a(){var c;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c=t.length>1&&void 0!==t[1]?t[1]:null,e){a.next=4;break}return a.next=4,r.setup();case 4:c?e.off(n,c):e.removeAllListeners(n);case 5:case"end":return a.stop()}}),a)})))()},emit:function(n,t){return Object(h.a)(j.a.mark((function a(){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=3;break}return a.next=3,r.setup();case 3:e.emit(n,t);case 4:case"end":return a.stop()}}),a)})))()},terminate:function(){e=null,!1}};return r}();window.socketService=X;var z={login:function(e){return ee.apply(this,arguments)},logout:function(){return ne.apply(this,arguments)},signup:function(e){return re.apply(this,arguments)},getUsers:function(){return O("user")},getById:function(e){return O("user/".concat(e))},remove:function(e){return v("user/".concat(e))},update:Y,getLoggedinUser:ae,increaseGame:function(){return $.apply(this,arguments)}};function Y(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(h.a)(j.a.mark((function e(r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("user/".concat(r._id),r);case 2:r=e.sent,ae()._id===r._id&&te(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(h.a)(j.a.mark((function e(){var r,n,t,a=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!(a.length>0&&void 0!==a[0])||a[0],n=a.length>1&&void 0!==a[1]?a[1]:1,(t=ae()).game_played=t.game_played+n||n,e.t0=r,e.next=!0===e.t0?7:!1===e.t0?9:null===e.t0?11:13;break;case 7:return t.win=t.win+n||n,e.abrupt("break",14);case 9:return t.lose=t.lose+n||n,e.abrupt("break",14);case 11:return t.draw=t.draw+n||n,e.abrupt("break",14);case 13:console.log("nothing happend");case 14:return e.next=16,Y(t);case 16:return e.abrupt("return",t.score);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(h.a)(j.a.mark((function e(r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("auth/login",r);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",te(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return(re=Object(h.a)(j.a.mark((function e(r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(r),e.next=3,g("auth/signup",r);case 3:return n=e.sent,e.abrupt("return",te(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return(ne=Object(h.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sessionStorage.clear(),e.next=3,g("auth/logout");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return sessionStorage.setItem("loggedinUser",JSON.stringify(e)),e}function ae(){return JSON.parse(sessionStorage.getItem("loggedinUser"))}function ce(e){return function(){var r=Object(h.a)(j.a.mark((function r(n){var t;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,z.login(e);case 3:t=r.sent,n({type:"SET_USER",user:t}),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.log("UserActions: err in login",r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}()}function se(e){return function(){var r=Object(h.a)(j.a.mark((function r(n){var t;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,z.signup(e);case 3:t=r.sent,n({type:"SET_USER",user:t}),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.log("UserActions: err in signup",r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}()}function ie(e){return function(){var r=Object(h.a)(j.a.mark((function r(n){var t;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,z.getById(e);case 3:t=r.sent,n({type:"SET_USER",user:t}),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.log("UserActions: err in refresh",r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}()}window.userService=z;var oe=function(){var e=Object(t.useState)({username:"",password:""}),r=Object(p.a)(e,2),n=r[0],a=r[1],c=Object(t.useState)({username:"",password:"",firstName:"",lastName:"",email:""}),s=Object(p.a)(c,2),i=s[0],l=s[1],d=Object(k.b)(),b=Object(o.e)(),f=function(){var e=Object(h.a)(j.a.mark((function e(r){var t,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),t=n.username,c=n.password,t||console.log("Please enter user/password"),s={username:t,password:c};try{d(ce(s)),a({username:"",password:""}),b.goBack()}catch(i){console.log("Login failed, try again.")}case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),m=function(){var e=Object(h.a)(j.a.mark((function e(r){var n,t,a,c,s,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),n=i.username,t=i.password,a=i.firstName,c=i.lastName,s=i.email,n&&t&&a&&c&&s||console.log("Please enter all fields"),o={username:n,password:t,firstName:a,lastName:c,email:s};try{d(se(o)),l({username:"",password:"",firstName:"",lastName:"",email:""}),b.goBack()}catch(u){console.log("Login failed, try again.")}case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"login-modal flex column",children:[Object(u.jsxs)("form",{className:"flex column align-center",onSubmit:f,children:[Object(u.jsx)("img",{src:"https://picsum.photos/300/300",alt:"Avatar"}),Object(u.jsxs)("div",{className:"form-inputs flex column w-75",children:[Object(u.jsxs)("span",{children:[Object(u.jsx)("input",{className:"slide-up",id:"card",type:"text",placeholder:"Enter username",value:n.username,onChange:function(e){return a(Object(I.a)(Object(I.a)({},n),{},{username:e.target.value}))},required:!0}),Object(u.jsx)("label",{htmlFor:"card",children:"Username"})]}),Object(u.jsxs)("span",{children:[Object(u.jsx)("input",{className:"slide-up",id:"card",type:"password",placeholder:"Enter Password",value:n.password,onChange:function(e){return a(Object(I.a)(Object(I.a)({},n),{},{password:e.target.value}))},required:!0}),Object(u.jsx)("label",{htmlFor:"card",children:"Password"})]}),Object(u.jsx)("div",{className:"flex space-around",children:Object(u.jsx)("button",{className:"btn-login w-25 center",type:"submit",children:"Login"})})]})]}),Object(u.jsx)("form",{className:"flex column align-center w-100",onSubmit:m,children:Object(u.jsxs)("div",{className:"form-inputs flex column w-75",children:[Object(u.jsxs)("span",{children:[Object(u.jsx)("input",{className:"slide-up",id:"card",type:"text",placeholder:"Enter username",value:i.username,onChange:function(e){return l(Object(I.a)(Object(I.a)({},i),{},{username:e.target.value}))},required:!0}),Object(u.jsx)("label",{htmlFor:"card",children:"Username"})]}),Object(u.jsxs)("span",{children:[Object(u.jsx)("input",{className:"slide-up",id:"card",type:"password",placeholder:"Enter Password",value:i.password,onChange:function(e){return l(Object(I.a)(Object(I.a)({},i),{},{password:e.target.value}))},required:!0}),Object(u.jsx)("label",{htmlFor:"card",children:"Password"})]}),Object(u.jsxs)("span",{children:[Object(u.jsx)("input",{className:"slide-up",id:"card",type:"text",placeholder:"Enter first name",value:i.name,onChange:function(e){return l(Object(I.a)(Object(I.a)({},i),{},{firstName:e.target.value}))},required:!0}),Object(u.jsx)("label",{htmlFor:"card",children:"First name"})]}),Object(u.jsxs)("span",{children:[Object(u.jsx)("input",{className:"slide-up",id:"card",type:"text",placeholder:"Enter Last name",value:i.lastName,onChange:function(e){return l(Object(I.a)(Object(I.a)({},i),{},{lastName:e.target.value}))},required:!0}),Object(u.jsx)("label",{htmlFor:"card",children:"Last name"})]}),Object(u.jsxs)("span",{children:[Object(u.jsx)("input",{className:"slide-up",id:"card",type:"text",placeholder:"Enter e-mail adress",value:i.email,onChange:function(e){return l(Object(I.a)(Object(I.a)({},i),{},{email:e.target.value}))},required:!0}),Object(u.jsx)("label",{htmlFor:"card",children:"E-mail"})]}),Object(u.jsx)("div",{className:"flex space-around",children:Object(u.jsx)("button",{className:"btn-login w-25 center",type:"submit",children:"Register"})})]})})]})};var ue=[{path:"/gamerooms/",component:function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:Object(u.jsx)("strong",{children:"Lobby"})}),Object(u.jsx)(_,{})]})}},{path:"/gamerooms/:roomId",component:function(){var e=Object(o.f)(),r=Object(o.e)(),n=e.roomId,a=Object(t.useState)(null),c=Object(p.a)(a,2),s=c[0],i=c[1],l=Object(t.useState)([]),d=Object(p.a)(l,2),b=d[0],f=d[1],m=Object(k.c)((function(e){return e.userModule})),O=function(){var e=Object(h.a)(j.a.mark((function e(){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getBoardById(n);case 2:r=e.sent,i(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(h.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.loggedInUser||!(m.loggedInUser._id===s.whitePlayer.user._id||s.blackPlayer.user&&m.loggedInUser._id===s.blackPlayer.user._id)){e.next=6;break}return e.next=3,N.deleteBoard(n);case 3:X.emit("game-ended",!0),ie(m.loggedInUser._id),console.log("game deleted");case 6:r.goBack();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(t.useEffect)((function(){function e(){return(e=Object(h.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.setup();case 2:X.emit("room-id",n),X.on("update-board",x),X.on("game-ended",v),X.emit("update-board",s);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]);var x=function(e){i(e)},v=function(e){console.log("end game"),ie(m.loggedInUser._id),e&&r.push("/gamerooms")};return Object(t.useEffect)((function(){if(s){var e=function(){var e=Object(h.a)(j.a.mark((function e(r,n){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.loggedInUser){e.next=6;break}return e.next=3,C.cellClicked(r,n,s,m.loggedInUser._id);case 3:(t=e.sent)&&t.whiteTurn!==s.whiteTurn&&X.emit("update-board",t),t&&i(Object(I.a)({},t));case 6:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}();!function(){for(var r=s.gameBoard,n=[],t=function(t){for(var a=function(a){n.push(Object(u.jsx)("div",{className:"cell ".concat(r[t][a].isMarked&&!r[t][a].piece?"hint":""," ").concat(r[t][a].isSelected?"selected":""),onClick:function(){return e(t,a)},children:r[t][a].piece},"".concat(t).concat(a)))},c=0;c<r.length;c++)a(c)},a=0;a<r.length;a++)t(a);f(n)}()}}),[s,m.loggedInUser]),s?Object(u.jsxs)("div",{children:[Object(u.jsxs)("h1",{children:["GameRoom ",n," ",Object(u.jsx)("button",{className:"leave-game-btn",onClick:function(){return g()},children:"Leave Game"})]}),Object(u.jsx)("section",{className:"flex wrap justify-center",children:Object(u.jsxs)("div",{className:"main-board flex column",children:[Object(u.jsx)("div",{className:"opponent w-100",children:m.loggedInUser&&s.blackPlayer.user?m.loggedInUser._id===s.blackPlayer.user._id?s.whitePlayer.user.username:s.blackPlayer.user.username:"Pending for another player..."}),Object(u.jsx)("div",{className:"board".concat(m.loggedInUser&&s.blackPlayer.user&&m.loggedInUser._id===s.blackPlayer.user._id?" black-player":""),children:b}),Object(u.jsx)("div",{className:"opponent w-100",children:m.loggedInUser&&s.blackPlayer.user&&m.loggedInUser._id===s.blackPlayer.user._id?s.blackPlayer.user.username:s.whitePlayer.user.username})]})})]}):(O(),Object(u.jsx)("div",{children:"loading..."}))}},{path:"/login/",component:function(){return Object(u.jsx)(oe,{})}},{path:"/Member/",component:function(){var e=Object(k.c)((function(e){return e.userModule})).loggedInUser;if(!e)return Object(u.jsx)("div",{children:" 404 page please login first "});var r=new Date(1e3*e.joined),n=new Date(1e3*e.last_online);return Object(u.jsxs)("div",{className:"member",children:[Object(u.jsx)("h1",{className:"mb-4",children:Object(u.jsxs)("strong",{children:[e.name," ",e.lastName," - Profile"]})}),Object(u.jsxs)("ul",{className:"flex space-around w-75 mb-4",children:[Object(u.jsxs)("li",{className:"flex column align-center user-info",children:[Object(u.jsx)("p",{children:e.followers.length}),Object(u.jsx)("p",{children:"followers"})]}),Object(u.jsxs)("li",{className:"flex column align-center user-info",children:[Object(u.jsx)("p",{children:e.game_played}),Object(u.jsx)("p",{children:"Total Game Played"})]}),Object(u.jsxs)("li",{className:"flex column align-center user-info green",children:[Object(u.jsx)("p",{children:e.win}),Object(u.jsx)("p",{children:"Wins"})]}),Object(u.jsxs)("li",{className:"flex column align-center user-info red",children:[Object(u.jsx)("p",{children:e.lose}),Object(u.jsx)("p",{children:"Loses"})]}),Object(u.jsxs)("li",{className:"flex column align-center user-info",children:[Object(u.jsx)("p",{children:e.draw}),Object(u.jsx)("p",{children:"Draws"})]})]}),Object(u.jsxs)("div",{className:"user-info-extra",children:[Object(u.jsxs)("p",{children:["Member since: ",r.toDateString()]}),Object(u.jsxs)("p",{children:["Active: ",n.toDateString()]}),Object(u.jsx)("h2",{className:"mb-4",children:"Game History"}),Object(u.jsx)("ul",{className:"flex wrap",children:e.game_history.map((function(e){var r=new Date(1e3*e.time);return Object(u.jsxs)("li",{className:"user-info history flex column space-between",children:[Object(u.jsxs)("span",{className:"winner",children:["Win: ",e.win]}),Object(u.jsxs)("span",{className:"loser",children:["Lose: ",e.lose]}),Object(u.jsx)("span",{className:"date",children:r.toDateString()})]},e.gameNum)}))})]})]})}},{path:"/Admin/:userId",component:function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Admin page!"}),Object(u.jsx)(i.b,{to:"/cars",children:"Cars"})]})}},{path:"/home",component:l},{path:"/",component:l}],le=(n(132),n(69)),de=n.n(le),je=function(){var e=Object(k.c)((function(e){return e.userModule})).loggedInUser,r=Object(k.b)(),n=Object(o.e)(),t=function(){n.push("/"),r(function(){var e=Object(h.a)(j.a.mark((function e(r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.logout();case 3:r({type:"SET_USER",user:null}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("UserActions: err in logout",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(r){return e.apply(this,arguments)}}())};return Object(u.jsx)("nav",{className:"flex align-center",children:Object(u.jsxs)("ul",{className:"flex align-center",children:[Object(u.jsx)("li",{children:Object(u.jsx)(i.c,{to:"/home",children:"Home"})}),Object(u.jsx)("li",{children:Object(u.jsx)(i.c,{to:"/gamerooms",children:"Games"})}),Object(u.jsx)("li",{children:e?Object(u.jsx)(i.c,{to:"/Member/",children:e.username}):Object(u.jsx)(i.c,{to:"/login",children:"Login"})}),e&&Object(u.jsx)("li",{children:Object(u.jsx)(de.a,{className:"icon",onClick:function(){return t()}})})]})})},he=function(){return Object(u.jsx)("header",{className:"main-header",children:Object(u.jsxs)("section",{className:"header-container container flex main-header space-between align-center",children:[Object(u.jsx)(i.b,{className:"logo flex align-center",to:"/",children:"Chess"}),Object(u.jsx)(je,{}),Object(u.jsx)("button",{className:"menu-btn",onClick:function(){return e=void 0,void console.log(e);var e},children:"\u2630"})]})})};var pe=function(){return Object(u.jsxs)(i.a,{children:[Object(u.jsx)(he,{}),Object(u.jsx)("main",{children:ue.map((function(e){return Object(u.jsx)(o.a,{exact:!0,component:e.component,path:e.path},e.path)}))})]})},be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,150)).then((function(r){var n=r.getCLS,t=r.getFID,a=r.getFCP,c=r.getLCP,s=r.getTTFB;n(e),t(e),a(e),c(e),s(e)}))},fe={loggedInUser:z.getLoggedinUser(),users:[]};var me=n(70),Oe=n(31),ge=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Oe.c,xe=Object(Oe.b)({userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(r.type){case"SET_USER":return Object(I.a)(Object(I.a)({},e),{},{loggedInUser:r.user});case"REMOVE_USER":return Object(I.a)(Object(I.a)({},e),{},{users:e.users.filter((function(e){return e._id!==r.userId}))});case"SET_USERS":return Object(I.a)(Object(I.a)({},e),{},{users:r.users});case"SET_SCORE":return Object(I.a)(Object(I.a)({},e),{},{loggedInUser:Object(I.a)(Object(I.a)({},e.loggedInUser),{},{score:r.score})});default:return e}}}),ve=Object(Oe.d)(xe,ge(Object(Oe.a)(me.a)));s.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(k.a,{store:ve,children:Object(u.jsx)(pe,{})})}),document.getElementById("root")),be()}},[[138,1,2]]]);
//# sourceMappingURL=main.1739221a.chunk.js.map